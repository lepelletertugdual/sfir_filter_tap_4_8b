% #################################################################################################################################################################################
% file :
%     script_generate_data.vhd
% ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
% objective :
%     generating data to be filtered
% ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
% limitation :
%     linear interpolation
% ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
% author :
%     Tugdual LE PELLETER
% ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
% history :
%     2024-10-19
%         file creation
% ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
% table of contents :
%     01. clean workspace
%     02. defining filter coefficients
%     03. filter coefficients quantification (fixed point)
%     04. data generation
%         04.01. setting parameters
%         04.02. input signal with noise
%         04.03. input signal quantification
%         04.04. saving input data
% #################################################################################################################################################################################

% #################################################################################################################################################################################
% 01. clean workspace
% #################################################################################################################################################################################
clear
close all

% #################################################################################################################################################################################
% 02. defining filter coefficients
% #################################################################################################################################################################################
h1 = -0.1339; h2 = -0.0838; h3 = 0.2026; h4 = 0.4064;

% #################################################################################################################################################################################
% 03. filter coefficients quantification (fixed-point)
% #################################################################################################################################################################################
w = 8;
f = 7;

coeff_0 = sfi(h1,w,f);
coeff_1 = sfi(h2,w,f);
coeff_2 = sfi(h3,w,f);
coeff_3 = sfi(h4,w,f);

coeff_0_bin = coeff_0.bin;
coeff_1_bin = coeff_1.bin;
coeff_2_bin = coeff_2.bin;
coeff_3_bin = coeff_3.bin;

% #################################################################################################################################################################################
% 04. data generation
% #################################################################################################################################################################################
    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    % 04.01. setting parameters
    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    T = 2;
    dt = 0.001;
    sample_time = 0:dt:T;

    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    % 04.02. input signal with noise
    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    x_in = cos(2.*pi.*(sample_time).*(1+(sample_time).*75)).';

    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    % 04.03. input signal quantification (fixed point)
    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    w = 8;
    f = 7;

    x_in_sfi = sfi(x_in,w,f);
    x_in_sfi_bin = x_in_sfi.bin;

    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    % 04.04. saving input data
    % -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
    writematrix(x_in_sfi_bin,'x_in_sfi_bin','Delimiter','comma');

% #################################################################################################################################################################################
% EOF
% #################################################################################################################################################################################

